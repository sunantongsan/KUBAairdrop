<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KUBAWAR</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.55.2/dist/phaser.min.js"></script>
    <style>
        body { margin: 0; padding: 0; background: #000; }
        canvas { display: block; margin: 0 auto; }
    </style>
</head>
<body>
<script>
    const config = {
        type: Phaser.AUTO,
        width: 400,
        height: 600,
        parent: 'game',
        scene: { preload, create, update }
    };

    let game, money = 1000, day = 1, location = 'Âú∞ÁêÉ', cargo = {}, prices = {}, scene;
    const goods = ['‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏î‡∏≤‡∏ß‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£', '‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏î‡∏≤‡∏ß‡∏û‡∏∏‡∏ò', '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏î‡∏≤‡∏ß‡πÄ‡∏™‡∏≤‡∏£‡πå'];

    function preload() {
        this.load.image('bg', 'https://i.imgur.com/5f7y5fK.jpg'); // ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏≠‡∏ß‡∏Å‡∏≤‡∏®
        this.load.image('ship', 'https://i.imgur.com/5f7y5fK.jpg'); // ‡∏¢‡∏≤‡∏ô
        this.load.image('planet1', 'https://i.imgur.com/5f7y5fK.jpg');
    }

    function create() {
        scene = this;
        this.add.image(200, 300, 'bg').setScale(2);
        this.add.text(20, 20, 'KUBAWAR', { fontSize: '32px', color: '#fff' }).setDepth(1);
        
        updatePrices();
        updateUI();
    }

    function update() {}

    function updatePrices() {
        prices = {};
        goods.forEach(g => prices[g] = Math.floor(Math.random() * 250) + 50);
    }

    function updateUI() {
        // ‡∏•‡∏ö UI ‡πÄ‡∏Å‡πà‡∏≤
        scene.children.list.filter(c => c.type === 'Text' && c.depth === 0).forEach(t => t.destroy());

        let y = 80;
        scene.add.text(20, y, `üí∞ ‡πÄ‡∏á‡∏¥‡∏ô: ${money} ‡∏ö‡∏≤‡∏ó`, { fontSize: '20px', color: '#0f0' }).setDepth(0); y += 30;
        scene.add.text(20, y, `üìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: ${day}`, { fontSize: '20px', color: '#ff0' }).setDepth(0); y += 30;
        scene.add.text(20, y, `üìç ‡∏î‡∏≤‡∏ß: ${location}`, { fontSize: '20px', color: '#0ff' }).setDepth(0); y += 50;

        scene.add.text(20, y, 'üõí ‡∏£‡∏≤‡∏Ñ‡∏≤', { fontSize: '18px', color: '#fff' }).setDepth(0); y += 25;
        goods.forEach(g => {
            scene.add.text(30, y, `${g}: ${prices[g]} ‡∏ö‡∏≤‡∏ó`, { fontSize: '16px', color: '#ccc' }).setDepth(0); y += 25;
        });

        y += 20;
        scene.add.text(20, y, 'üéí ‡πÉ‡∏ô‡∏¢‡∏≤‡∏ô', { fontSize: '18px', color: '#fff' }).setDepth(0); y += 25;
        let total = 0;
        for (let item in cargo) {
            if (cargo[item] > 0) {
                scene.add.text(30, y, `${item}: ${cargo[item]} ‡∏ä‡∏¥‡πâ‡∏ô`, { fontSize: '16px', color: '#0f0' }).setDepth(0); y += 20;
                total += cargo[item];
            }
        }
        if (total === 0) scene.add.text(30, y, '‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡πà‡∏≤', { fontSize: '16px', color: '#666' }).setDepth(0);

        // ‡∏õ‡∏∏‡πà‡∏°
        const btnY = 520;
        const travelBtn = scene.add.text(50, btnY, 'üöÄ ‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á', { fontSize: '18px', backgroundColor: '#4CAF50', padding: { x: 10, y: 5 } }).setInteractive();
        travelBtn.on('pointerdown', travel);

        const buyBtn = scene.add.text(180, btnY, 'üõí ‡∏ã‡∏∑‡πâ‡∏≠', { fontSize: '18px', backgroundColor: '#2196F3', padding: { x: 10, y: 5 } }).setInteractive();
        buyBtn.on('pointerdown', () => buySell('buy'));

        const sellBtn = scene.add.text(280, btnY, 'üí∞ ‡∏Ç‡∏≤‡∏¢', { fontSize: '18px', backgroundColor: '#f44336', padding: { x: 10, y: 5 } }).setInteractive();
        sellBtn.on('pointerdown', () => buySell('sell'));
    }

    function travel() {
        day++;
        location = ['Âú∞ÁêÉ', '‡∏î‡∏≤‡∏ß‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£', '‡∏î‡∏≤‡∏ß‡∏û‡∏∏‡∏ò', '‡∏î‡∏≤‡∏ß‡πÄ‡∏™‡∏≤‡∏£‡πå'][Math.floor(Math.random() * 4)];
        updatePrices();
        updateUI();
        checkWin();
    }

    function buySell(action) {
        goods.forEach(g => {
            if (action === 'buy') {
                let cost = prices[g] * 10;
                if (money >= cost) {
                    money -= cost;
                    cargo[g] = (cargo[g] || 0) + 10;
                }
            } else if (action === 'sell' && cargo[g]) {
                let qty = Math.min(10, cargo[g]);
                let revenue = prices[g] * qty * 0.8;
                money += revenue;
                cargo[g] -= qty;
                if (cargo[g] <= 0) delete cargo[g];
            }
        });
        updateUI();
        checkWin();
    }

    function checkWin() {
        if (money >= 10000) {
            alert('üéâ ‡∏Ñ‡∏∏‡∏ì‡∏ä‡∏ô‡∏∞! ‡∏£‡∏ß‡∏¢‡πÅ‡∏•‡πâ‡∏ß!');
            location.reload();
        } else if (day > 30) {
            alert('‚è∞ ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤!');
            location.reload();
        }
    }

    game = new Phaser.Game(config);
</script>
</body>
</html>
